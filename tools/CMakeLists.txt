CMAKE_MINIMUM_REQUIRED(VERSION 2.8 FATAL_ERROR)
PROJECT("tools")

LIST(APPEND CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake")

SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../lib)
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../lib)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../bin)

SET(CMAKE_BUILD_TYPE $ENV{BUILD_TYPE})

#IF (${CMAKE_CXX_COMPILER_ID} STREQUAL MSVC)
#foreach(flag_var
#        CMAKE_CXX_FLAGS CMAKE_CXX_FLAGS_DEBUG CMAKE_CXX_FLAGS_RELEASE
#        CMAKE_CXX_FLAGS_MINSIZEREL CMAKE_CXX_FLAGS_RELWITHDEBINFO)
#   if(${flag_var} MATCHES "/MT")
#      string(REGEX REPLACE "/MT" "/MD" ${flag_var} "${${flag_var}}")
#   endif(${flag_var} MATCHES "/MT")
#endforeach(flag_var)
#ENDIF()

SET(CMAKE_RULE_MESSAGES OFF)

IF (${CMAKE_CXX_COMPILER_ID} STREQUAL MSVC)
#	SET(protobuf_MSVC_STATIC_RUNTIME OFF CACHE BOOL "" FORCE)
	ADD_SUBDIRECTORY(${CMAKE_SOURCE_DIR}/protobuf/cmake)
ENDIF()

SET(CMAKE_RULE_MESSAGES ON)

