CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(src)

IF(ENABLE_TESTING AND ENABLE_TESTING_COVERAGE)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -g -fprofile-arcs -ftest-coverage -coverage")
ENDIF() # ENABLE_TESTING_COVERAGE

IF( ENABLE_ASAN )
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -g -fsanitize=address -fno-omit-frame-pointer")
	SET(LINK_FLAGS "${LINK_FLAGS} -g -fsanitize=address")
ENDIF()

IF( DISABLE_CRYPT )
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DDISABLE_CRYPT")
ENDIF()

#this is a temp fix for windows builds
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DWIN32_LEAN_AND_MEAN")

ADD_SUBDIRECTORY(proto)
ADD_SUBDIRECTORY(core)
ADD_SUBDIRECTORY(rosecommon)
ADD_SUBDIRECTORY(login)
ADD_SUBDIRECTORY(char)
ADD_SUBDIRECTORY(map)

IF(ENABLE_TESTING)
    ADD_SUBDIRECTORY(tests)
ENDIF()

